<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>It's lunch time! | Rakuten Ghoul </title>

	<meta name="description" content="Rakuten Ghoul">
	<meta name="author" content="Yang Ruijie | Charlie">

	<link href="/static/css/bootstrap.min.css" rel="stylesheet">
	<link href="/static/css/style.css" rel="stylesheet">

	<script src="/static/js/jquery.min.js"></script>
	<script src="/static/js/bootstrap.min.js"></script>
	<script src="/static/js/scripts.js"></script>

</head>
<body>
	<div class="container-fluid">
		<nav class="navbar navbar-default navbar-inverse" role="navigation">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
				<span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
			</button><a class="navbar-brand" href="/">楽天喰種</a>
			
			<div class="collapse navbar-collapse" id="navbar-collapse">
				<ul class="nav navbar-nav">
					<li class="active"><a data-toggle="tab" href="#lunch">Lunch</a></li>
					<li><a data-toggle="tab" href="#dinner">Dinner</a></li>
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">History<strong class="caret"></strong></a>
						<ul class="dropdown-menu">
							{% for date in folders %}
							<li>
								<a href="/date/{{ date }}/">{{ date }}</a>
							</li>
							{% endfor %}
						</ul>
					</li>
				</ul>
			</div>
		</nav>
		
		<div class="tab-content">
			<div id="lunch" class="tab-pane fade in active">
				<div class="jumbotron well"><h2>Lunch@9th floor</h2></div>
				<div class="row" id="lunch9">
					{% for file, cnt in lunch9cnt.items %}
					<div class="col-md-4"><img width=300 height=400 src="/static/data/{{ date }}/lunch9/{{ file }}">
						<div class="btn-group">
							<button type="button" class="btn btn-primary" id="likeButton" onclick = "like('{{ file }}')">
								<span class="glyphicon glyphicon-thumbs-up"></span>&nbsp;Like&nbsp;
								<p id="like_{{ file }}" class="pic_like">{{ cnt.0 }}</p>
							</button>
							<button type="button" class="btn btn-info" id="dislikeButton" onclick = "dislike('{{ file }}')">
								<span class="glyphicon glyphicon-thumbs-down"></span>&nbsp;So so
								<p id="dislike_{{ file }}">{{ cnt.1 }}</p>
							</button>
						</div>
					</div>
					{% endfor %}
				</div>
				<div class="jumbotron well"><h2>Lunch@22nd floor</h2></div>
				<div class="row" id="lunch22">
					{% for file, cnt in lunch22cnt.items %}
					<div class="col-md-4"><img width=300 height=400 src="/static/data/{{ date }}/lunch22/{{ file }}">
						<div class="btn-group">
							<button type="button" class="btn btn-primary" id="likeButton" onclick = "like('{{ file }}')">
								<span class="glyphicon glyphicon-thumbs-up"></span>&nbsp;Like&nbsp;
								<p id="like_{{ file }}" class="pic_like">{{ cnt.0 }}</p>
							</button>
							<button type="button" class="btn btn-info" id="dislikeButton" onclick = "dislike('{{ file }}')">
								<span class="glyphicon glyphicon-thumbs-down"></span>&nbsp;So so
								<p id="dislike_{{ file }}">{{ cnt.1 }}</p>
							</button>
						</div>
					</div>
					{% endfor %}
				</div>
			</div>
			<div id="dinner" class="tab-pane fade">
				<div class="jumbotron well"><h2>Dinner@9th floor</h2></div>
				<div class="row" id="dinner9">
					{% for file, cnt in dinner9cnt.items %}
					<div class="col-md-4"><img width=300 height=400 src="/static/data/{{ date }}/dinner9/{{ file }}">
						<div class="btn-group">
							<button type="button" class="btn btn-primary" id="likeButton" onclick = "like('{{ file }}')">
								<span class="glyphicon glyphicon-thumbs-up"></span>&nbsp;Like&nbsp;
								<p id="like_{{ file }}" class="pic_like">{{ cnt.0 }}</p>
							</button>
							<button type="button" class="btn btn-info" id="dislikeButton" onclick = "dislike('{{ file }}')">
								<span class="glyphicon glyphicon-thumbs-down"></span>&nbsp;So so
								<p id="dislike_{{ file }}">{{ cnt.1 }}</p>
							</button>
						</div>
					</div>
					{% endfor %}
				</div>
				<div class="jumbotron well"><h2>Dinner@22nd floor</h2></div>
				<div class="row" id="dinner22">
					{% for file, cnt in dinner22cnt.items %}
					<div class="col-md-4"><img width=300 height=400 src="/static/data/{{ date }}/dinner22/{{ file }}">
						<div class="btn-group">
							<button type="button" class="btn btn-primary" id="likeButton" onclick = "like('{{ file }}')">
								<span class="glyphicon glyphicon-thumbs-up"></span>&nbsp;Like&nbsp;
								<p id="like_{{ file }}" class="pic_like">{{ cnt.0 }}</p>
							</button>
							<button type="button" class="btn btn-info" id="dislikeButton" onclick = "dislike('{{ file }}')">
								<span class="glyphicon glyphicon-thumbs-down"></span>&nbsp;So so
								<p id="dislike_{{ file }}">{{ cnt.1 }}</p>
							</button>
						</div>
					</div>
					{% endfor %}
				</div>
			</div>
		</div>
		<div class="jumbotron well-sm"><h2>GhoulChat</h2></div>
		<dl class="dl-horizontal" id="allComments">
			{% for cmt in cmts %}
				{{ cmt.context | safe}}
			{% endfor %}
		</dl>
		<form class="form-horizontal" id="cmtForm" method="POST" action="comment/">
			<div class="form-group">
				<label class="col-sm-1 control-label">Name</label>
				<div class="col-sm-3">
					<input class="form-control" name="author" placeholder="Your name">
				</div>
			</div>
			<div class="form-group">
				<label class="col-sm-1 control-label">Comment</label>
				<div class="col-sm-3">
					<textarea class="form-control" id="context0" name="context" row=5 placeholder="Enjoyed your dish?"></textarea>
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-offset-2 col-sm-10">
					<button type="submit" class="btn btn-success" name="submitCmt">Submit</button>
				</div>
			</div>
		</form>

	</div>

	<script type="text/javascript">
	    var frm = $("#cmtForm");
	    frm.submit(function (ev) {
	    	var ctx = document.getElementById("context0").value;
			if (ctx.length==0){
				alert("Hey dude, just say something :)");
				return false;
			}
	        $.ajax({
	            type: frm.attr("method"),
	            url: frm.attr("action"),
	            data: frm.serialize(),
	            success: function (data) {
	                var cmts = document.getElementById("allComments");
	                cmts.innerHTML = cmts.innerHTML + data;
	                frm[0].reset();
	            }
	        });
	        ev.preventDefault();
	    });
	</script>

	<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	ga('create', 'UA-67136323-1', 'auto');
	ga('send', 'pageview');

	</script>
</body>
</html>